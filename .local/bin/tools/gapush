#!/bin/bash

#######################################################################
#                                Author                               #
#######################################################################
#                                                                     #
#	    ____  __.      .__  .__				      #
#	   |    |/ _|____  |  | |__|__  ______.__.________	      #
#	   |      < \__  \ |  | |  \  \/  <   |  |\___   /            #
#	   |    |  \ / __ \|  |_|  |>    < \___  | /    /             #
#	   |____|__ (____  /____/__/__/\_ \/ ____|/_____ \            #
#		   \/    \/              \/\/           \/            #
#                                                                     #
#######################################################################
#                             Created:02/14/20                     #
#######################################################################

#Description:
# Push all git repos from my git repo folders and my dotfiles bare repo

# Location of all my github projects
mygit=$HOME/github/myrepos


# My dotfile alias to my git bare repo
dotfiles="/usr/bin/git --git-dir=$HOME/.cfg/ --work-tree=$HOME"


# Function to run on all my dotfiles
dcp() {
    $dotfiles add -u
    $dotfiles commit -a -m "Uploaded by script, no commit msg added"
    $dotfiles push
}


# Find all git repo folders and run git add + git commit + git push on them
find "$mygit" -name ".git" -type d -exec bash -c "echo '{}' && cd '{}'/.. && git add . && git commit -a -m "Uploaded by script, no commit msg" && git push" \;


# Upload all my new dotfiles to github
dcp
